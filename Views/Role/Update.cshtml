@using LaVie.Enums
@{
    ViewData["Title"] = "Update a role";
}

<div class="page-bar">
    @await Html.PartialAsync("Components/_Breadcrumbs")
    @await Html.PartialAsync("Components/_BackButton")
</div>

<h1 class="page-text font-bold text-xl mb-4">All Permissions</h1>
<div class="flex gap-2 flex-wrap mb-8">
    @foreach (var permission in Enum.GetValues(typeof(PERMISSIONS)))
    {
        <span class="badge primary cursor-grab" id="@permission" draggable="true" ondragstart="drag(event)">@permission</span>
    }
</div>

@* dropzone *@
<h1 class="page-text font-bold text-xl mb-4">Role Permissions</h1>
<div class="flex gap-2 flex-wrap" ondragover="allowDrop(event)" ondrop="drop(event)">

    @foreach (var permission in ViewBag.Permissions)
    {
        <span class="badge primary cursor-grab">@(permission.Value)</span>
    }
</div>


<script>
    function allowDrop(ev) {
        ev.preventDefault(); // Allows dropping
    }

    function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        const data = ev.dataTransfer.getData("text");
        const draggedElement = document.getElementById(data);
        ev.target.appendChild(draggedElement);
    }

</script>